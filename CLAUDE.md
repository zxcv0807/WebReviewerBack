# Claude Code í”„ë¡œì íŠ¸ ì„¤ì •

## í”„ë¡œì íŠ¸ ê°œìš”
**ì›¹ì‚¬ì´íŠ¸ ë¦¬ë·° ë° í”¼ì‹± ì‚¬ì´íŠ¸ ì‹ ê³  í”Œë«í¼ ë°±ì—”ë“œ**
- FastAPI + Supabase ê¸°ë°˜ REST API
- Docker Compose + Nginx í”„ë¡ì‹œ êµ¬ì„±
- Google OAuth 2.0 ì†Œì…œ ë¡œê·¸ì¸ ì§€ì›
- ì›¹ì‚¬ì´íŠ¸ ë¦¬ë·°, í”¼ì‹± ì‹ ê³ , ê²Œì‹œíŒ ê¸°ëŠ¥
- Supabase Storageë¥¼ í†µí•œ íŒŒì¼ ì—…ë¡œë“œ ê´€ë¦¬
- AWS EC2 ë°°í¬ í™˜ê²½

ì´ íŒŒì¼ì€ Claude Codeê°€ ì´ í”„ë¡œì íŠ¸ì—ì„œ ì‘ì—…í•  ë•Œ ë”°ë¼ì•¼ í•  ê°€ì´ë“œë¼ì¸ì„ ì •ì˜í•©ë‹ˆë‹¤.

## ì½”ë“œ ìˆ˜ì • ì‹œ í•„ìˆ˜ ì„¤ëª… í˜•ì‹

ëª¨ë“  ì½”ë“œ ìˆ˜ì • ì‹œ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ì„¤ëª…ì„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:

### ğŸ” ê¸°ì¡´ ì½”ë“œ ë¶„ì„
- í˜„ì¬ ì½”ë“œì˜ ìƒíƒœì™€ êµ¬ì¡°
- ë°œê²¬ëœ ë¬¸ì œì ì´ë‚˜ ê°œì„ ì´ í•„ìš”í•œ ë¶€ë¶„
- ë³´ì•ˆ, ì„±ëŠ¥, ê°€ë…ì„± ê´€ì ì—ì„œì˜ ì´ìŠˆ

### âš ï¸ ìˆ˜ì •ì´ í•„ìš”í•œ ì´ìœ 
- ì™œ ì´ ìˆ˜ì •ì´ í•„ìš”í•œì§€ êµ¬ì²´ì ì¸ ì´ìœ 
- ì–´ë–¤ ë¬¸ì œë¥¼ í•´ê²°í•˜ê±°ë‚˜ ìœ„í—˜ì„ ë°©ì§€í•˜ëŠ”ì§€
- ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ë‚˜ ì‚¬ìš©ì ê²½í—˜ ê°œì„  ì¸¡ë©´

### âœ¨ ê°œì„ ì‚¬í•­
- ìˆ˜ì • í›„ ì–»ëŠ” êµ¬ì²´ì ì¸ ì¥ì ë“¤
- ë³´ì•ˆ ê°•í™”, ì„±ëŠ¥ í–¥ìƒ, ìœ ì§€ë³´ìˆ˜ì„± ê°œì„  ë“±
- ìƒˆë¡œ ì¶”ê°€ëœ ê¸°ëŠ¥ì´ë‚˜ ê²€ì¦ ë¡œì§ì˜ ì„¤ëª…

### ğŸ› ï¸ ì¶”ê°€ ì„¤ì • í•„ìš”ì‚¬í•­
- ìƒˆë¡œ ì¶”ê°€ëœ í™˜ê²½ë³€ìˆ˜ë‚˜ ì„¤ì • íŒŒì¼
- ë°°í¬ ì‹œ ì£¼ì˜ì‚¬í•­ì´ë‚˜ ë§ˆì´ê·¸ë ˆì´ì…˜ í•„ìš”ì‚¬í•­
- ì˜ì¡´ì„± ì„¤ì¹˜ë‚˜ ì¶”ê°€ ì„¤ì •ì´ í•„ìš”í•œ ê²½ìš°

## í”„ë¡œì íŠ¸ë³„ ì½”ë”© ê·œì¹™

### ë³´ì•ˆ ìš°ì„  ì›ì¹™
- ëª¨ë“  ì‚¬ìš©ì ì…ë ¥ì— ëŒ€í•œ ê²€ì¦ í•„ìˆ˜
- ë¯¼ê°í•œ ì •ë³´ëŠ” í™˜ê²½ë³€ìˆ˜ë¡œ ê´€ë¦¬
- ë¡œê¹… ì‹œ ê°œì¸ì •ë³´ë‚˜ ë¯¼ê° ë°ì´í„° ë…¸ì¶œ ê¸ˆì§€

### ì½”ë“œ í’ˆì§ˆ ê¸°ì¤€
- ì£¼ì„ë³´ë‹¤ëŠ” ëª…í™•í•œ ë³€ìˆ˜ëª…ê³¼ í•¨ìˆ˜ëª… ì‚¬ìš©
- í•˜ë“œì½”ë”©ëœ ê°’ë“¤ì€ í™˜ê²½ë³€ìˆ˜ë‚˜ ìƒìˆ˜ë¡œ ë¶„ë¦¬
- ì—ëŸ¬ ì²˜ë¦¬ëŠ” êµ¬ì²´ì ì´ê³  ì˜ë¯¸ìˆëŠ” ë©”ì‹œì§€ ì œê³µ

### í™˜ê²½ë³€ìˆ˜ ê´€ë¦¬
- ëª¨ë“  ì„¤ì •ê°’ì€ í™˜ê²½ë³€ìˆ˜ë¡œ ê´€ë¦¬
- ê°œë°œí™˜ê²½: ENVIRONMENT=development, ë°°í¬í™˜ê²½: ENVIRONMENT=production
- CORS_ORIGINS ì„¤ì •ìœ¼ë¡œ í—ˆìš© ë„ë©”ì¸ ê´€ë¦¬
- ë¯¼ê°í•œ ì •ë³´(.env íŒŒì¼)ëŠ” Gitì— ì»¤ë°‹í•˜ì§€ ì•ŠìŒ
- Docker Composeì—ì„œ í™˜ê²½ë³€ìˆ˜ ì˜¤ë²„ë¼ì´ë“œ í™œìš©

### ë¡œê¹… ë° ëª¨ë‹ˆí„°ë§
- print ë¬¸ ëŒ€ì‹  ì ì ˆí•œ ë¡œê·¸ ë ˆë²¨ ì‚¬ìš©
- ê°œë°œí™˜ê²½: LOG_LEVEL=DEBUG, ìš´ì˜í™˜ê²½: LOG_LEVEL=INFO
- ì—ëŸ¬ ë°œìƒ ì‹œ ì¶©ë¶„í•œ ì»¨í…ìŠ¤íŠ¸ ì •ë³´ í¬í•¨
- ë¡œê·¸ íŒŒì¼ì€ ./logs/ ë””ë ‰í„°ë¦¬ì— ì €ì¥ (Docker ë³¼ë¥¨ ë§ˆìš´íŠ¸)
- ìš´ì˜ í™˜ê²½ì—ì„œ ë””ë²„ê·¸ ì •ë³´ ë…¸ì¶œ ë°©ì§€

## íŠ¹ë³„ ì£¼ì˜ì‚¬í•­

### ì¸ì¦ ê´€ë ¨ ì½”ë“œ
- JWT í† í° ì²˜ë¦¬ ì‹œ ë³´ì•ˆ ê²€ì¦ ì² ì €íˆ
- ì¿ í‚¤ ì„¤ì • ì‹œ ë³´ì•ˆ í”Œë˜ê·¸ ì ì ˆíˆ ì„¤ì •
- OAuth ì²˜ë¦¬ ì‹œ ìƒíƒœ ê²€ì¦ ë° ì—ëŸ¬ ì²˜ë¦¬ ê°•í™”

### ë°ì´í„°ë² ì´ìŠ¤ ì‘ì—…
- SQL Injection ë°©ì§€ë¥¼ ìœ„í•œ íŒŒë¼ë¯¸í„° ë°”ì¸ë”©
- íŠ¸ëœì­ì…˜ ì²˜ë¦¬ ì‹œ ë¡¤ë°± ë¡œì§ í¬í•¨
- ë°ì´í„° ê²€ì¦ í›„ ì €ì¥

### API ì—”ë“œí¬ì¸íŠ¸
- ì…ë ¥ ê²€ì¦ì€ Pydantic ëª¨ë¸ í™œìš©
- ì ì ˆí•œ HTTP ìƒíƒœ ì½”ë“œ ë°˜í™˜
- API ë¬¸ì„œí™”ë¥¼ ìœ„í•œ íƒœê·¸ì™€ ì„¤ëª… ì¶”ê°€

## ì„±ëŠ¥ ë° í™•ì¥ì„± ê³ ë ¤ì‚¬í•­

### ë°ì´í„°ë² ì´ìŠ¤ ìµœì í™”
- í•„ìš”í•œ í•„ë“œë§Œ SELECTí•˜ì—¬ ë„¤íŠ¸ì›Œí¬ íŠ¸ë˜í”½ ìµœì†Œí™”
- ì¸ë±ìŠ¤ í™œìš©ì„ ê³ ë ¤í•œ ì¿¼ë¦¬ ì‘ì„±
- N+1 ì¿¼ë¦¬ ë¬¸ì œ ë°©ì§€

### API ì‘ë‹µ ìµœì í™”
- í˜ì´ì§€ë„¤ì´ì…˜ êµ¬í˜„ìœ¼ë¡œ ëŒ€ìš©ëŸ‰ ë°ì´í„° ì²˜ë¦¬
- ìºì‹± ì „ëµ ê³ ë ¤ (ì ì ˆí•œ ê²½ìš°)
- ì‘ë‹µ ë°ì´í„° êµ¬ì¡° ìµœì í™”

### ë©”ëª¨ë¦¬ ë° ë¦¬ì†ŒìŠ¤ ê´€ë¦¬
- íŒŒì¼ ì—…ë¡œë“œ ì‹œ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ì œí•œ
- ì™¸ë¶€ API í˜¸ì¶œ ì‹œ íƒ€ì„ì•„ì›ƒ ì„¤ì •
- ì»¤ë„¥ì…˜ í’€ ê´€ë¦¬

## â›” Claude Code í…ŒìŠ¤íŠ¸ ê¸ˆì§€ ì •ì±…

### í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ê¸ˆì§€
- **ì ˆëŒ€ ê¸ˆì§€**: Claude Codeì—ì„œ ì„œë²„ë¥¼ ì‹¤í–‰í•˜ê±°ë‚˜ API í…ŒìŠ¤íŠ¸ë¥¼ ìˆ˜í–‰í•˜ëŠ” ê²ƒì„ ê¸ˆì§€í•©ë‹ˆë‹¤
- **ì´ìœ **: í…ŒìŠ¤íŠ¸ëŠ” ì‚¬ìš©ìê°€ ì§ì ‘ ìˆ˜í–‰í•´ì•¼ í•˜ë©°, ClaudeëŠ” ì½”ë“œ ì‘ì„±ì—ë§Œ ì§‘ì¤‘í•´ì•¼ í•©ë‹ˆë‹¤

## ğŸ” í•„ìˆ˜ ì—ëŸ¬ ê²€ì¦ ì ˆì°¨

### ì½”ë“œ ìˆ˜ì • í›„ ë°˜ë“œì‹œ ìˆ˜í–‰í•´ì•¼ í•  ì—ëŸ¬ ê²€ì¦

#### 1ë‹¨ê³„: Python ë¬¸ë²• ê²€ì¦
- **í•„ìˆ˜**: `python -m py_compile services/*.py` ëª…ë ¹ìœ¼ë¡œ ëª¨ë“  ì„œë¹„ìŠ¤ íŒŒì¼ì˜ ë¬¸ë²• ì˜¤ë¥˜ í™•ì¸
- **í•„ìˆ˜**: `python -m py_compile main.py` ëª…ë ¹ìœ¼ë¡œ ë©”ì¸ íŒŒì¼ ë¬¸ë²• ì˜¤ë¥˜ í™•ì¸
- **ëª©ì **: ê¸°ë³¸ì ì¸ Python ë¬¸ë²• ì˜¤ë¥˜ë‚˜ ë“¤ì—¬ì“°ê¸° ì˜¤ë¥˜ ì‚¬ì „ ë°œê²¬

#### 2ë‹¨ê³„: Import ì˜¤ë¥˜ ê²€ì¦  
- **í•„ìˆ˜**: `python -c "from services import auth, post, review, phishing, image, pagination"` ëª…ë ¹ìœ¼ë¡œ import ì˜¤ë¥˜ í™•ì¸
- **í•„ìˆ˜**: `python -c "import main"` ëª…ë ¹ìœ¼ë¡œ ë©”ì¸ ëª¨ë“ˆ import í™•ì¸
- **ëª©ì **: ìˆœí™˜ import, ëª¨ë“ˆ ê²½ë¡œ ì˜¤ë¥˜, ëˆ„ë½ëœ ì˜ì¡´ì„± ì‚¬ì „ ë°œê²¬

#### 3ë‹¨ê³„: FastAPI ì•± ì´ˆê¸°í™” ê²€ì¦
- **í•„ìˆ˜**: `python -c "from main import app; print('FastAPI app initialized successfully')"` ëª…ë ¹ìœ¼ë¡œ ì•± ì´ˆê¸°í™” í™•ì¸
- **ëª©ì **: FastAPI ì•± ìƒì„± ê³¼ì •ì—ì„œ ë°œìƒí•  ìˆ˜ ìˆëŠ” ì„¤ì • ì˜¤ë¥˜ë‚˜ ë¼ìš°í„° ë“±ë¡ ì˜¤ë¥˜ í™•ì¸

### âš ï¸ ì—ëŸ¬ ë°œê²¬ ì‹œ ëŒ€ì‘
1. **ë¬¸ë²• ì˜¤ë¥˜**: í•´ë‹¹ íŒŒì¼ì˜ ë¬¸ë²• ì˜¤ë¥˜ ìˆ˜ì • í›„ ì¬ê²€ì¦
2. **Import ì˜¤ë¥˜**: ëª¨ë“ˆ ê²½ë¡œë‚˜ ì˜ì¡´ì„± í™•ì¸ í›„ ìˆ˜ì •
3. **ì•± ì´ˆê¸°í™” ì˜¤ë¥˜**: ë¼ìš°í„° ë“±ë¡ì´ë‚˜ ì„¤ì • ê´€ë ¨ ì½”ë“œ ê²€í† 

## ê²€ì¦ ê°€ì´ë“œë¼ì¸

### Claude Code ì—­í•  ì œí•œ
- ì½”ë“œ ì‘ì„± ë° ìˆ˜ì •ë§Œ ìˆ˜í–‰
- ë¬¸ë²• ë° êµ¬ì¡°ì  ì—ëŸ¬ ê²€ì¦ë§Œ ìˆ˜í–‰
- **ê¸ˆì§€**: ì„œë²„ ì‹¤í–‰, API í˜¸ì¶œ, ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ ë“± ëª¨ë“  í˜•íƒœì˜ í…ŒìŠ¤íŠ¸ ìˆ˜í–‰

### ë°°í¬ ê´€ë ¨ í™•ì¸ì‚¬í•­
- `deploy_v2.sh` ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ë°°í¬
- í™˜ê²½ë³€ìˆ˜ ì„¤ì • í™•ì¸ (íŠ¹íˆ CORS_ORIGINS, ENVIRONMENT)
- Docker ì»¨í…Œì´ë„ˆ í—¬ìŠ¤ì²´í¬ í†µê³¼ í™•ì¸
- SSL ì¸ì¦ì„œ ë° ë„ë©”ì¸ ì—°ê²° ìƒíƒœ í™•ì¸

### ë³´ì•ˆ ê²€ì¦ ì²´í¬ë¦¬ìŠ¤íŠ¸
- ì‚¬ìš©ì ì…ë ¥ ê²€ì¦ í™•ì¸
- ì¸ì¦ì´ í•„ìš”í•œ ì—”ë“œí¬ì¸íŠ¸ ë³´í˜¸ í™•ì¸
- ë¯¼ê°í•œ ì •ë³´ ë¡œê¹… ì—¬ë¶€ ì ê²€
- CORS ì„¤ì • ì ì ˆì„± í™•ì¸

## í”„ë¡œì íŠ¸ íŠ¹í™” ê·œì¹™

### ì›¹ì‚¬ì´íŠ¸ ë¦¬ë·° ê¸°ëŠ¥
- ë¦¬ë·° í‰ì ì€ 0-5 ë²”ìœ„ ê²€ì¦ í•„ìˆ˜
- ëŒ“ê¸€ê³¼ ë¦¬ë·°ì˜ í‰ê·  í‰ì  ê³„ì‚° ë¡œì§ ì •í™•ì„± í™•ì¸
- URL í˜•ì‹ ê²€ì¦ ë° ì •ê·œí™”

### í”¼ì‹± ì‚¬ì´íŠ¸ ì‹ ê³  ê¸°ëŠ¥
- ì‹ ê³ ëœ URLì˜ ì•ˆì „ì„± ê²€ì¦
- ê´€ë¦¬ì ê¶Œí•œ ê²€ì¦ ì² ì €íˆ
- ì‹ ê³  ìƒíƒœ ê´€ë¦¬ ì›Œí¬í”Œë¡œìš° ì¤€ìˆ˜

### íŒŒì¼ ì—…ë¡œë“œ ê¸°ëŠ¥ (Supabase Storage)
- Supabase Storageë¥¼ í†µí•œ íŒŒì¼ ì—…ë¡œë“œ ê´€ë¦¬
- í—ˆìš©ëœ íŒŒì¼ í˜•ì‹ë§Œ ì—…ë¡œë“œ ê°€ëŠ¥ (ì´ë¯¸ì§€ íŒŒì¼)
- íŒŒì¼ í¬ê¸° ì œí•œ ì¤€ìˆ˜
- ì—…ë¡œë“œ URL ë³´ì•ˆ ë° ì ‘ê·¼ ê¶Œí•œ í™•ì¸

### Google OAuth ì—°ë™
- ì‚¬ìš©ìëª… ì¤‘ë³µ ì‹œ ìë™ ì²˜ë¦¬ ë¡œì§
- ê¸°ì¡´ ê³„ì •ê³¼ Google ê³„ì • ì—°ë™ ì²˜ë¦¬
- OAuth ì—ëŸ¬ ìƒí™©ë³„ ì ì ˆí•œ ì‘ë‹µ

### í˜„ì¬ ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡°
| table_name       | column_name      | data_type                   | is_nullable |
| ---------------- | ---------------- | --------------------------- | ----------- |
| image            | id               | integer                     | NO          |
| image            | url              | text                        | NO          |
| image            | filename         | text                        | YES         |
| image            | uploaded_at      | timestamp without time zone | NO          |
| image            | storage_path     | character varying           | YES         |
| phishing_comment | id               | integer                     | NO          |
| phishing_comment | phishing_site_id | integer                     | YES         |
| phishing_comment | user_id          | integer                     | YES         |
| phishing_comment | content          | text                        | NO          |
| phishing_comment | created_at       | timestamp without time zone | YES         |
| phishing_comment | updated_at       | timestamp without time zone | YES         |
| phishing_site    | id               | integer                     | NO          |
| phishing_site    | url              | text                        | NO          |
| phishing_site    | reason           | text                        | NO          |
| phishing_site    | description      | text                        | YES         |
| phishing_site    | status           | text                        | NO          |
| phishing_site    | created_at       | timestamp without time zone | NO          |
| phishing_site    | view_count       | integer                     | YES         |
| phishing_site    | like_count       | integer                     | YES         |
| phishing_site    | dislike_count    | integer                     | YES         |
| phishing_site    | user_id          | integer                     | YES         |
| phishing_vote    | id               | integer                     | NO          |
| phishing_vote    | phishing_site_id | integer                     | YES         |
| phishing_vote    | user_id          | integer                     | YES         |
| phishing_vote    | vote_type        | character varying           | YES         |
| phishing_vote    | created_at       | timestamp without time zone | YES         |
| post             | id               | integer                     | NO          |
| post             | title            | text                        | NO          |
| post             | category         | text                        | NO          |
| post             | content          | text                        | NO          |
| post             | created_at       | timestamp without time zone | NO          |
| post             | updated_at       | timestamp without time zone | NO          |
| post             | user_name        | text                        | NO          |
| post             | user_id          | integer                     | YES         |
| post             | view_count       | integer                     | YES         |
| post             | like_count       | integer                     | YES         |
| post             | dislike_count    | integer                     | YES         |
| post_comment     | id               | integer                     | NO          |
| post_comment     | post_id          | integer                     | YES         |
| post_comment     | user_id          | integer                     | YES         |
| post_comment     | content          | text                        | NO          |
| post_comment     | created_at       | timestamp without time zone | YES         |
| post_comment     | updated_at       | timestamp without time zone | YES         |
| post_vote        | id               | integer                     | NO          |
| post_vote        | post_id          | integer                     | YES         |
| post_vote        | user_id          | integer                     | YES         |
| post_vote        | vote_type        | character varying           | YES         |
| post_vote        | created_at       | timestamp without time zone | YES         |
| review           | id               | integer                     | NO          |
| review           | site_name        | text                        | NO          |
| review           | url              | text                        | NO          |
| review           | summary          | text                        | NO          |
| review           | rating           | double precision            | NO          |
| review           | pros             | text                        | NO          |
| review           | cons             | text                        | NO          |
| review           | created_at       | timestamp without time zone | NO          |
| review           | view_count       | integer                     | YES         |
| review           | like_count       | integer                     | YES         |
| review           | dislike_count    | integer                     | YES         |
| review           | user_id          | integer                     | YES         |
| review_comment   | id               | integer                     | NO          |
| review_comment   | review_id        | integer                     | NO          |
| review_comment   | content          | text                        | NO          |
| review_comment   | created_at       | timestamp without time zone | NO          |
| review_comment   | user_id          | integer                     | YES         |
| review_comment   | updated_at       | timestamp without time zone | YES         |
| review_vote      | id               | integer                     | NO          |
| review_vote      | review_id        | integer                     | YES         |
| review_vote      | user_id          | integer                     | YES         |
| review_vote      | vote_type        | character varying           | YES         |
| review_vote      | created_at       | timestamp without time zone | YES         |
| tag              | id               | integer                     | NO          |
| tag              | name             | text                        | NO          |
| tag              | post_id          | integer                     | NO          |
| user             | id               | integer                     | NO          |
| user             | username         | text                        | NO          |
| user             | email            | text                        | NO          |
| user             | password_hash    | text                        | YES         |
| user             | created_at       | timestamp without time zone | NO          |
| user             | role             | text                        | NO          |
| user             | google_id        | text                        | YES         |